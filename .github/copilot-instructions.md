# Copilot Instructions

## プロジェクト概要

- Vue 3 + TypeScript + Vite 構成の Vue 3 コンポーネントライブラリです。
- ディレクトリ構成や命名規則は既存の src/ 以下に従ってください。

## 開発哲学

- 責務分離を徹底し、UI とロジックを明確に分離する。
- Composable API を優先し、DOM 管理・Observer 管理・イベント管理は **必ず composable 内に閉じ込める**。
- UI コンポーネントは **最小限のマークアップ** で動作するように設計する。
- 命名は厳密に行い、将来の拡張性・意味的正確性・構造的整合性を重視する。
- 推測ではなく、要件が曖昧な場合は Copilot に「補完ではなく質問」を促す。

## コーディング規約

- TypeScript を優先的に使用してください。
- Composition API（setup script）を推奨します。
- 型安全を重視し、any はあまり使わないでください。ただし型定義が複雑な場合は例外とします。any を使う場合は事前に相談してください。
- 既存の stores/ や router/ の構成に合わせて実装してください。

## 命名規則

- 名前は「構造」「意味」「拡張性」を基準に選ぶ。
- 新しいコンポーネント名を提案する際は、**代替案を複数提示し、意味的差分を説明すること**。

## コード生成ルール

- 曖昧な指示がある場合は、コードを生成する前に質問する。
- 生成するコードには以下を含める：
  - 目的の明確化
  - 選択したアプローチの理由
  - 拡張性・保守性の観点
- 自動生成時は「最小構成で動く」ことを優先し、過剰な抽象化は避ける。

## ドキュメント生成ルール

- 設計意図・責務分離・API の使い方を簡潔に説明する。
- コード例は実用的で、UI 側の負担が最小になるようにする。

## Copilot への要求

Copilot は以下の状況で必ず質問を返すこと：

- 要件が曖昧なとき
- 命名の意図が不明なとき
- レイアウト要件が不足しているとき
- composable の責務範囲が判断できないとき

## トーンとスタイル

- 過度にカジュアルにせず、技術的に正確で簡潔な説明を行う。
- 推測ではなく、根拠に基づいた提案を行う。

## コンポーネント

- src/components/ 以下の命名規則（PascalCase）に従ってください。
- レイアウトや UI 部品は既存の layout/ ディレクトリを参考にしてください。
- props と emits は明確に定義し、型注釈を付けてください。
- スタイルは可能な限り scoped CSS を使用してください。
- 再利用可能なコンポーネントは components/common/ に配置してください。

## Composable

- DOM 参照の取得・監視・クリーンアップを内部で完結させる
- オプションベースの柔軟な API を提供する
- UI 側に sentinel 要素や observer 設定を要求しない

## ストア

- Pinia を使用しています。stores/ 以下の既存ストアを参考にしてください。
- ストアの状態、ゲッター、アクションは明確に分けて実装してください。
- ストアの型定義を適切に行い、型安全を確保してください。

## ルーティング

- Vue Router を使用しています。router/ 以下の既存ルート設定を参考にしてください。
- ルートごとにコンポーネントを分割し、src/pages に配置してください。

## テスト

- テストは Vitest で記述します（src/api/index.test.ts などを参考）。
- 新規機能追加時はテストも追加してください。
- 可能な限りユニットテストを優先し、必要に応じて統合テストを追加してください。
- テストファイル名は \*.test.ts としてください。

## その他

- 既存のコードスタイルや ESLint 設定に従ってください。
- ドキュメントは docs/ 以下に追加してください。
